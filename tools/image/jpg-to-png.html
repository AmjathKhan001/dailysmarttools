<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JPG to PNG Converter - Daily Smart Tool</title>
    <meta name="description" content="Convert JPG images to PNG format. Free online image converter with batch processing support.">
    <link rel="stylesheet" href="../style.css">
    <style>
        .converter-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .upload-section {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 3px dashed #0ea5e9;
            border-radius: 15px;
            padding: 50px 20px;
            text-align: center;
            margin: 30px 0;
            transition: all 0.3s;
        }
        .upload-section.dragover {
            background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%);
            border-color: #0284c7;
        }
        .upload-icon {
            font-size: 64px;
            margin-bottom: 20px;
            color: #0ea5e9;
        }
        .upload-btn {
            background: #0ea5e9;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-block;
            margin: 15px 0;
        }
        .upload-btn:hover {
            background: #0284c7;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(14, 165, 233, 0.3);
        }
        .file-list {
            margin: 25px 0;
            display: none;
        }
        .file-item {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .file-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .file-icon {
            font-size: 24px;
            color: #0ea5e9;
        }
        .file-details h4 {
            margin: 0 0 5px 0;
            font-size: 1rem;
        }
        .file-details p {
            margin: 0;
            font-size: 0.9rem;
            color: #64748b;
        }
        .remove-btn {
            background: #ef4444;
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            line-height: 1;
        }
        .convert-options {
            background: #f8fafc;
            padding: 25px;
            border-radius: 12px;
            margin: 25px 0;
            border-left: 4px solid #10b981;
        }
        .option-group {
            margin: 20px 0;
        }
        .preview-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
            display: none;
        }
        .preview-box {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        .preview-image {
            max-width: 100%;
            max-height: 200px;
            object-fit: contain;
            margin: 15px 0;
            border-radius: 5px;
        }
        .conversion-result {
            background: #f0fdf4;
            border: 2px solid #10b981;
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
            display: none;
        }
        .result-info {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 8px;
            border: 1px solid #d1fae5;
        }
        .result-details {
            flex: 1;
        }
        .batch-processing {
            margin-top: 30px;
            padding: 20px;
            background: #fefce8;
            border-radius: 10px;
            border: 1px solid #fde047;
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #e2e8f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 15px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #0ea5e9, #10b981);
            border-radius: 10px;
            width: 0%;
            transition: width 0.3s;
        }
        @media (max-width: 768px) {
            .preview-section {
                grid-template-columns: 1fr;
            }
            .result-info {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-container">
            <a href="../index.html" class="logo">
                <div class="logo-icon">‚öôÔ∏è</div>
                <span>Daily Smart Tool</span>
            </a>
            <button class="mobile-menu-btn">‚ò∞</button>
            <button class="theme-toggle" title="Toggle dark mode">üåô</button>
            <nav>
                <ul>
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="../all-tools.html">All Tools</a></li>
                    <li><a href="../tools/text/text-case-converter.html">Text Tools</a></li>
                    <li><a href="image-resizer.html">Image Tools</a></li>
                    <li><a href="../tools/calculators/loan-calculator.html">Calculators</a></li>
                    <li><a href="../tools/converters/unit-converter.html">Converters</a></li>
                    <li><a href="../tools/generators/password-generator.html">Generators</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="breadcrumb">
        <div class="container">
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li class="separator">/</li>
                <li><a href="../all-tools.html">All Tools</a></li>
                <li class="separator">/</li>
                <li><a href="image-resizer.html">Image Tools</a></li>
                <li class="separator">/</li>
                <li>JPG to PNG Converter</li>
            </ul>
        </div>
    </section>

    <main class="container">
        <section class="tool-page">
            <div class="tool-header">
                <h1>JPG to PNG Converter</h1>
                <p>Convert JPG/JPEG images to PNG format with transparency support. Batch conversion available.</p>
            </div>
            
            <div class="tool-container">
                <div class="tool-main">
                    <div class="converter-container">
                        <!-- Upload Section -->
                        <div class="upload-section" id="upload-section">
                            <div class="upload-icon">üñºÔ∏è</div>
                            <h2>Convert JPG to PNG</h2>
                            <p>Drag & drop your JPG files here, or click to browse</p>
                            <button class="upload-btn" id="upload-btn">Select JPG Files</button>
                            <p style="color: #64748b; margin-top: 15px;">
                                Supports .jpg, .jpeg files ‚Ä¢ Max 10MB per file ‚Ä¢ Batch conversion supported
                            </p>
                            <input type="file" id="file-input" accept="image/jpeg,image/jpg" multiple style="display: none;">
                        </div>
                        
                        <!-- File List -->
                        <div class="file-list" id="file-list">
                            <h3>Selected Files</h3>
                            <div id="files-container"></div>
                            <div style="text-align: center; margin: 20px 0;">
                                <button class="btn btn-secondary" id="clear-all">Clear All</button>
                                <button class="btn btn-secondary" id="add-more">Add More Files</button>
                            </div>
                        </div>
                        
                        <!-- Conversion Options -->
                        <div class="convert-options">
                            <h3>Conversion Settings</h3>
                            
                            <div class="option-group">
                                <label for="png-quality">PNG Quality:</label>
                                <select id="png-quality" style="width: 100%; padding: 10px; margin-top: 10px; border-radius: 8px; border: 1px solid #cbd5e1;">
                                    <option value="high">High Quality (Best for printing)</option>
                                    <option value="medium" selected>Medium Quality (Recommended)</option>
                                    <option value="low">Low Quality (Smaller file size)</option>
                                </select>
                            </div>
                            
                            <div class="option-group">
                                <label>Transparency Options:</label>
                                <div style="margin-top: 10px;">
                                    <label style="display: flex; align-items: center; gap: 10px;">
                                        <input type="checkbox" id="add-transparency">
                                        Add transparent background (for logos/icons)
                                    </label>
                                    <div id="transparency-color" style="margin-top: 15px; display: none;">
                                        <label>Background Color to Make Transparent:</label>
                                        <input type="color" id="transparent-color" value="#ffffff" style="margin-left: 10px;">
                                        <input type="text" id="transparent-color-hex" value="#ffffff" style="width: 100px; padding: 5px; margin-left: 10px;">
                                    </div>
                                </div>
                            </div>
                            
                            <div class="option-group">
                                <label for="output-naming">Output File Naming:</label>
                                <select id="output-naming" style="width: 100%; padding: 10px; margin-top: 10px; border-radius: 8px; border: 1px solid #cbd5e1;">
                                    <option value="same">Same as original (with .png extension)</option>
                                    <option value="timestamp">Add timestamp</option>
                                    <option value="custom">Custom prefix</option>
                                </select>
                                <input type="text" id="custom-prefix" placeholder="Enter custom prefix" style="width: 100%; padding: 10px; margin-top: 10px; border-radius: 8px; border: 1px solid #cbd5e1; display: none;">
                            </div>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="tool-buttons" style="text-align: center;">
                            <button class="btn btn-primary" id="convert-btn" style="padding: 15px 40px; font-size: 1.1rem;" disabled>
                                Convert to PNG
                            </button>
                            <button class="btn btn-secondary" id="reset-all">Reset All</button>
                        </div>
                        
                        <!-- Batch Processing -->
                        <div class="batch-processing" id="batch-processing" style="display: none;">
                            <h4>Batch Conversion Progress</h4>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progress-fill"></div>
                            </div>
                            <div style="text-align: center;">
                                <span id="progress-text">0% (0/0)</span>
                                <div style="margin-top: 15px;">
                                    <button class="btn btn-secondary" id="cancel-conversion">Cancel</button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Preview Section -->
                        <div class="preview-section" id="preview-section">
                            <div class="preview-box">
                                <h4>Original JPG</h4>
                                <img id="original-jpg" class="preview-image" src="" alt="Original JPG">
                                <div id="original-info"></div>
                            </div>
                            <div class="preview-box">
                                <h4>Converted PNG</h4>
                                <img id="converted-png" class="preview-image" src="" alt="Converted PNG">
                                <div id="converted-info"></div>
                            </div>
                        </div>
                        
                        <!-- Conversion Result -->
                        <div class="conversion-result" id="conversion-result">
                            <h3>‚úÖ Conversion Successful!</h3>
                            <div class="result-info">
                                <div class="result-details">
                                    <h4 id="result-file-name"></h4>
                                    <p id="result-file-info"></p>
                                </div>
                                <button class="btn btn-success" id="download-single">Download PNG</button>
                            </div>
                            
                            <div id="batch-result" style="display: none;">
                                <h4>Batch Conversion Complete</h4>
                                <div id="batch-files-list"></div>
                                <div style="text-align: center; margin-top: 20px;">
                                    <button class="btn btn-success" id="download-all">Download All PNG Files (ZIP)</button>
                                </div>
                            </div>
                            
                            <div style="text-align: center; margin-top: 20px;">
                                <button class="btn btn-secondary" id="convert-more">Convert More Files</button>
                            </div>
                        </div>
                        
                        <div class="info-section">
                            <h3>About This Tool</h3>
                            <p>The JPG to PNG Converter allows you to convert JPEG images to PNG format while maintaining quality. Key features:</p>
                            <ul>
                                <li><strong>Lossless Conversion:</strong> No quality loss during conversion</li>
                                <li><strong>Transparency Support:</strong> Add alpha channel for transparent backgrounds</li>
                                <li><strong>Batch Processing:</strong> Convert multiple files at once</li>
                                <li><strong>High Quality:</strong> Preserve image details and colors</li>
                                <li><strong>Fast Processing:</strong> Convert files in seconds</li>
                            </ul>
                            <p><strong>Use Cases:</strong> Web design (logos with transparency), printing, archiving, and preparing images for applications that require PNG format.</p>
                        </div>
                    </div>
                </div>
                
                <div class="tool-sidebar">
                    <div class="ad-banner vertical">Ad Space (300x250)</div>
                    
                    <h3>Related Image Tools</h3>
                    <ul class="related-tools">
                        <li><a href="png-to-jpg.html">‚û§ PNG to JPG Converter</a></li>
                        <li><a href="image-compressor.html">‚û§ Image Compressor</a></li>
                        <li><a href="image-resizer.html">‚û§ Image Resizer</a></li>
                        <li><a href="image-cropper.html">‚û§ Image Cropper</a></li>
                    </ul>
                    
                    <div style="background: #f8fafc; padding: 15px; border-radius: 8px; margin-top: 20px;">
                        <h4>JPG vs PNG</h4>
                        <table style="width: 100%; font-size: 0.85rem;">
                            <tr>
                                <th></th>
                                <th>JPG</th>
                                <th>PNG</th>
                            </tr>
                            <tr>
                                <td>Compression</td>
                                <td>Lossy</td>
                                <td>Lossless</td>
                            </tr>
                            <tr>
                                <td>Transparency</td>
                                <td>No</td>
                                <td>Yes</td>
                            </tr>
                            <tr>
                                <td>Best For</td>
                                <td>Photos</td>
                                <td>Graphics</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Daily Smart Tool</h3>
                    <p>Your one-stop destination for free online utilities, calculators, converters, and productivity tools.</p>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="../index.html">Home</a></li>
                        <li><a href="../all-tools.html">All Tools</a></li>
                        <li><a href="../about.html">About Us</a></li>
                        <li><a href="../contact.html">Contact</a></li>
                        <li><a href="../privacy.html">Privacy Policy</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Popular Categories</h3>
                    <ul class="footer-links">
                        <li><a href="../tools/text/text-case-converter.html">Text Tools</a></li>
                        <li><a href="image-resizer.html">Image Tools</a></li>
                        <li><a href="../tools/calculators/loan-calculator.html">Calculators</a></li>
                        <li><a href="../tools/converters/unit-converter.html">Converters</a></li>
                        <li><a href="../tools/generators/password-generator.html">Generators</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact Us</h3>
                    <ul class="footer-links">
                        <li>Email: contact@dailysmarttool.com</li>
                        <li>Feedback: feedback@dailysmarttool.com</li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                &copy; <script>document.write(new Date().getFullYear())</script> Daily Smart Tool. All rights reserved. | Part of Safetyguide360 Network
            </div>
        </div>
    </footer>

    <script src="../script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script>
        // Variables
        let selectedFiles = [];
        let convertedFiles = [];
        let isConverting = false;
        
        // Format bytes
        function formatBytes(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }
        
        // Update file list display
        function updateFileList() {
            const container = document.getElementById('files-container');
            container.innerHTML = '';
            
            selectedFiles.forEach((file, index) => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <div class="file-info">
                        <div class="file-icon">üñºÔ∏è</div>
                        <div class="file-details">
                            <h4>${file.name}</h4>
                            <p>${formatBytes(file.size)} ‚Ä¢ ${index + 1}/${selectedFiles.length}</p>
                        </div>
                    </div>
                    <button class="remove-btn" data-index="${index}">√ó</button>
                `;
                container.appendChild(fileItem);
            });
            
            // Show/hide file list
            const fileList = document.getElementById('file-list');
            if (selectedFiles.length > 0) {
                fileList.style.display = 'block';
                document.getElementById('convert-btn').disabled = false;
            } else {
                fileList.style.display = 'none';
                document.getElementById('convert-btn').disabled = true;
            }
        }
        
        // Convert single file
        function convertFile(file, quality, addTransparency, transparentColor) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = new Image();
                    img.onload = function() {
                        const canvas = document.createElement('canvas');
                        canvas.width = img.width;
                        canvas.height = img.height;
                        
                        const ctx = canvas.getContext('2d');
                        
                        // If adding transparency, fill with color first
                        if (addTransparency) {
                            ctx.fillStyle = transparentColor;
                            ctx.fillRect(0, 0, canvas.width, canvas.height);
                        }
                        
                        // Draw image
                        ctx.drawImage(img, 0, 0);
                        
                        // Set quality based on selection
                        let compression = 0.9;
                        if (quality === 'high') compression = 1.0;
                        if (quality === 'low') compression = 0.7;
                        
                        // Convert to PNG
                        canvas.toBlob(function(blob) {
                            const url = URL.createObjectURL(blob);
                            const convertedFile = {
                                original: file,
                                blob: blob,
                                url: url,
                                name: getOutputFileName(file.name),
                                size: blob.size,
                                width: img.width,
                                height: img.height
                            };
                            resolve(convertedFile);
                        }, 'image/png', compression);
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
            });
        }
        
        // Get output file name
        function getOutputFileName(originalName) {
            const baseName = originalName.replace(/\.[^/.]+$/, "");
            const naming = document.getElementById('output-naming').value;
            const customPrefix = document.getElementById('custom-prefix').value;
            
            let prefix = '';
            if (naming === 'timestamp') {
                prefix = new Date().getTime() + '_';
            } else if (naming === 'custom' && customPrefix) {
                prefix = customPrefix + '_';
            }
            
            return prefix + baseName + '.png';
        }
        
        // Download converted file
        function downloadFile(file, index = 0) {
            const link = document.createElement('a');
            link.href = file.url;
            link.download = file.name;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
        
        // Download all files as ZIP
        async function downloadAllFiles() {
            const zip = new JSZip();
            
            convertedFiles.forEach((file, index) => {
                zip.file(file.name, file.blob);
            });
            
            const content = await zip.generateAsync({type: "blob"});
            const url = URL.createObjectURL(content);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'converted_png_files.zip';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
        }
        
        // Event Listeners
        document.getElementById('upload-btn').addEventListener('click', () => {
            document.getElementById('file-input').click();
        });
        
        document.getElementById('add-more').addEventListener('click', () => {
            document.getElementById('file-input').click();
        });
        
        document.getElementById('file-input').addEventListener('change', (e) => {
            const newFiles = Array.from(e.target.files);
            selectedFiles = [...selectedFiles, ...newFiles];
            updateFileList();
        });
        
        // Remove file
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('remove-btn')) {
                const index = parseInt(e.target.getAttribute('data-index'));
                selectedFiles.splice(index, 1);
                updateFileList();
            }
        });
        
        // Clear all
        document.getElementById('clear-all').addEventListener('click', () => {
            selectedFiles = [];
            updateFileList();
        });
        
        // Drag and drop
        const uploadSection = document.getElementById('upload-section');
        
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            uploadSection.addEventListener(eventName, preventDefaults, false);
        });
        
        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }
        
        ['dragenter', 'dragover'].forEach(eventName => {
            uploadSection.addEventListener(eventName, () => {
                uploadSection.classList.add('dragover');
            });
        });
        
        ['dragleave', 'drop'].forEach(eventName => {
            uploadSection.addEventListener(eventName, () => {
                uploadSection.classList.remove('dragover');
            });
        });
        
        uploadSection.addEventListener('drop', (e) => {
            const files = Array.from(e.dataTransfer.files).filter(file => 
                file.type === 'image/jpeg' || file.name.toLowerCase().endsWith('.jpg') || file.name.toLowerCase().endsWith('.jpeg')
            );
            selectedFiles = [...selectedFiles, ...files];
            updateFileList();
        });
        
        // Transparency options
        document.getElementById('add-transparency').addEventListener('change', (e) => {
            document.getElementById('transparency-color').style.display = e.target.checked ? 'block' : 'none';
        });
        
        // Color input sync
        document.getElementById('transparent-color').addEventListener('input', (e) => {
            document.getElementById('transparent-color-hex').value = e.target.value;
        });
        
        document.getElementById('transparent-color-hex').addEventListener('input', (e) => {
            if (e.target.value.match(/^#[0-9A-F]{6}$/i)) {
                document.getElementById('transparent-color').value = e.target.value;
            }
        });
        
        // Output naming options
        document.getElementById('output-naming').addEventListener('change', (e) => {
            document.getElementById('custom-prefix').style.display = e.target.value === 'custom' ? 'block' : 'none';
        });
        
        // Convert button
        document.getElementById('convert-btn').addEventListener('click', async () => {
            if (selectedFiles.length === 0 || isConverting) return;
            
            isConverting = true;
            convertedFiles = [];
            
            const quality = document.getElementById('png-quality').value;
            const addTransparency = document.getElementById('add-transparency').checked;
            const transparentColor = document.getElementById('transparent-color').value;
            
            // Show batch processing for multiple files
            if (selectedFiles.length > 1) {
                document.getElementById('batch-processing').style.display = 'block';
                document.getElementById('preview-section').style.display = 'none';
                document.getElementById('conversion-result').style.display = 'none';
            }
            
            // Convert files
            for (let i = 0; i < selectedFiles.length; i++) {
                if (!isConverting) break; // Check if cancelled
                
                try {
                    const convertedFile = await convertFile(
                        selectedFiles[i], 
                        quality, 
                        addTransparency, 
                        transparentColor
                    );
                    convertedFiles.push(convertedFile);
                    
                    // Update progress
                    const progress = ((i + 1) / selectedFiles.length) * 100;
                    document.getElementById('progress-fill').style.width = progress + '%';
                    document.getElementById('progress-text').textContent = 
                        `${Math.round(progress)}% (${i + 1}/${selectedFiles.length})`;
                    
                } catch (error) {
                    console.error('Conversion error:', error);
                }
            }
            
            isConverting = false;
            document.getElementById('batch-processing').style.display = 'none';
            
            // Show results
            if (convertedFiles.length > 0) {
                if (convertedFiles.length === 1) {
                    // Single file result
                    const file = convertedFiles[0];
                    document.getElementById('original-jpg').src = URL.createObjectURL(file.original);
                    document.getElementById('converted-png').src = file.url;
                    document.getElementById('original-info').innerHTML = `
                        ${file.original.name}<br>
                        ${formatBytes(file.original.size)}
                    `;
                    document.getElementById('converted-info').innerHTML = `
                        ${file.name}<br>
                        ${formatBytes(file.size)} ‚Ä¢ ${file.width}√ó${file.height}px
                    `;
                    
                    document.getElementById('result-file-name').textContent = file.name;
                    document.getElementById('result-file-info').textContent = 
                        `${formatBytes(file.size)} ‚Ä¢ ${file.width}√ó${file.height}px`;
                    
                    document.getElementById('preview-section').style.display = 'grid';
                    document.getElementById('batch-result').style.display = 'none';
                } else {
                    // Batch result
                    const batchList = document.getElementById('batch-files-list');
                    batchList.innerHTML = '';
                    convertedFiles.forEach((file, index) => {
                        const div = document.createElement('div');
                        div.className = 'file-item';
                        div.innerHTML = `
                            <div class="file-info">
                                <div class="file-icon">üìÅ</div>
                                <div class="file-details">
                                    <h4>${file.name}</h4>
                                    <p>${formatBytes(file.size)} ‚Ä¢ ${file.width}√ó${file.height}px</p>
                                </div>
                            </div>
                            <button class="btn btn-secondary" data-index="${index}" onclick="downloadFile(convertedFiles[${index}])">
                                Download
                            </button>
                        `;
                        batchList.appendChild(div);
                    });
                    
                    document.getElementById('batch-result').style.display = 'block';
                    document.getElementById('preview-section').style.display = 'none';
                }
                
                document.getElementById('conversion-result').style.display = 'block';
            }
        });
        
        // Cancel conversion
        document.getElementById('cancel-conversion').addEventListener('click', () => {
            isConverting = false;
            document.getElementById('batch-processing').style.display = 'none';
        });
        
        // Download single
        document.getElementById('download-single').addEventListener('click', () => {
            if (convertedFiles.length === 1) {
                downloadFile(convertedFiles[0]);
            }
        });
        
        // Download all
        document.getElementById('download-all').addEventListener('click', downloadAllFiles);
        
        // Convert more
        document.getElementById('convert-more').addEventListener('click', () => {
            selectedFiles = [];
            convertedFiles = [];
            updateFileList();
            document.getElementById('conversion-result').style.display = 'none';
            document.getElementById('preview-section').style.display = 'none';
        });
        
        // Reset all
        document.getElementById('reset-all').addEventListener('click', () => {
            selectedFiles = [];
            convertedFiles = [];
            updateFileList();
            document.getElementById('conversion-result').style.display = 'none';
            document.getElementById('preview-section').style.display = 'none';
            document.getElementById('batch-processing').style.display = 'none';
            
            // Reset form
            document.getElementById('png-quality').value = 'medium';
            document.getElementById('add-transparency').checked = false;
            document.getElementById('transparency-color').style.display = 'none';
            document.getElementById('output-naming').value = 'same';
            document.getElementById('custom-prefix').style.display = 'none';
            document.getElementById('custom-prefix').value = '';
        });
    </script>
</body>
</html>