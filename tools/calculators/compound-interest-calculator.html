<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compound Interest Calculator - Daily Smart Tool</title>
    <meta name="description" content="Calculate compound interest with monthly contributions. Free online investment growth calculator.">
    <link rel="stylesheet" href="../style.css">
    <style>
        .calculator-container {
            max-width: 900px;
            margin: 0 auto;
        }
        .calc-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        @media (max-width: 768px) {
            .calc-grid {
                grid-template-columns: 1fr;
            }
        }
        .input-section {
            background: #f8fafc;
            padding: 30px;
            border-radius: 12px;
            border-left: 4px solid #10b981;
        }
        .input-group {
            margin: 20px 0;
        }
        .input-row {
            display: flex;
            align-items: center;
            margin: 15px 0;
        }
        .input-label {
            flex: 1;
            font-weight: 600;
        }
        .input-field {
            width: 150px;
            padding: 12px;
            border: 2px solid #cbd5e1;
            border-radius: 8px;
            font-size: 1rem;
            text-align: right;
        }
        .input-field:focus {
            outline: none;
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }
        .slider-container {
            flex: 2;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .value-slider {
            flex: 1;
            height: 8px;
            border-radius: 4px;
            background: #cbd5e1;
            outline: none;
            -webkit-appearance: none;
        }
        .value-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: #10b981;
            cursor: pointer;
            border: 3px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .slider-value {
            min-width: 60px;
            text-align: right;
            font-weight: bold;
            color: #10b981;
        }
        .result-section {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            padding: 30px;
            border-radius: 12px;
            border: 2px solid #10b981;
        }
        .result-box {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        .result-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #065f46;
            margin: 10px 0;
            text-align: center;
        }
        .result-label {
            font-size: 0.9rem;
            color: #64748b;
            text-align: center;
        }
        .result-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        .result-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #d1fae5;
        }
        .result-item .value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #10b981;
            margin: 5px 0;
        }
        .chart-container {
            height: 200px;
            margin: 30px 0;
            position: relative;
            background: white;
            border-radius: 10px;
            padding: 20px;
            border: 1px solid #e2e8f0;
        }
        .chart-bar {
            position: absolute;
            bottom: 0;
            display: flex;
            align-items: flex-end;
            width: 100%;
            height: 160px;
            gap: 2px;
        }
        .bar {
            flex: 1;
            background: #10b981;
            border-radius: 4px 4px 0 0;
            position: relative;
            transition: height 1s ease;
        }
        .bar.interest {
            background: #34d399;
        }
        .bar-label {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8rem;
            color: #64748b;
            white-space: nowrap;
        }
        .timeline-controls {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }
        .time-marker {
            text-align: center;
            font-size: 0.9rem;
            color: #64748b;
        }
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 25px 0;
        }
        .summary-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
            text-align: center;
        }
        .summary-card.green {
            border-color: #10b981;
            background: #f0fdf4;
        }
        .summary-card.blue {
            border-color: #0ea5e9;
            background: #f0f9ff;
        }
        .summary-card.purple {
            border-color: #8b5cf6;
            background: #faf5ff;
        }
        .summary-card .title {
            font-size: 0.9rem;
            color: #64748b;
            margin-bottom: 10px;
        }
        .summary-card .amount {
            font-size: 1.8rem;
            font-weight: bold;
        }
        .frequency-options {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        .freq-btn {
            padding: 8px 15px;
            background: #e2e8f0;
            border: 2px solid #cbd5e1;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .freq-btn:hover {
            background: #cbd5e1;
        }
        .freq-btn.active {
            background: #10b981;
            color: white;
            border-color: #059669;
        }
        .calc-legend {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            justify-content: center;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        .legend-color.principal {
            background: #10b981;
        }
        .legend-color.interest {
            background: #34d399;
        }
        .legend-color.total {
            background: #065f46;
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-container">
            <a href="../index.html" class="logo">
                <div class="logo-icon">‚öôÔ∏è</div>
                <span>Daily Smart Tool</span>
            </a>
            <button class="mobile-menu-btn">‚ò∞</button>
            <button class="theme-toggle" title="Toggle dark mode">üåô</button>
            <nav>
                <ul>
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="../all-tools.html">All Tools</a></li>
                    <li><a href="../tools/text/text-case-converter.html">Text Tools</a></li>
                    <li><a href="../tools/image/image-resizer.html">Image Tools</a></li>
                    <li><a href="loan-calculator.html">Calculators</a></li>
                    <li><a href="../tools/converters/unit-converter.html">Converters</a></li>
                    <li><a href="../tools/generators/password-generator.html">Generators</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="breadcrumb">
        <div class="container">
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li class="separator">/</li>
                <li><a href="../all-tools.html">All Tools</a></li>
                <li class="separator">/</li>
                <li><a href="loan-calculator.html">Calculators</a></li>
                <li class="separator">/</li>
                <li>Compound Interest Calculator</li>
            </ul>
        </div>
    </section>

    <main class="container">
        <section class="tool-page">
            <div class="tool-header">
                <h1>Compound Interest Calculator</h1>
                <p>Calculate how your investments grow with compound interest. Includes monthly contributions and visualization.</p>
            </div>
            
            <div class="tool-container">
                <div class="tool-main">
                    <div class="calculator-container">
                        <div class="calc-grid">
                            <!-- Input Section -->
                            <div class="input-section">
                                <h3>Investment Details</h3>
                                
                                <div class="input-group">
                                    <div class="input-row">
                                        <div class="input-label">Initial Investment</div>
                                        <div class="slider-container">
                                            <input type="range" id="principal-slider" class="value-slider" min="100" max="1000000" step="100" value="10000">
                                            <div class="slider-value">$<span id="principal-value">10,000</span></div>
                                        </div>
                                    </div>
                                    
                                    <div class="input-row">
                                        <div class="input-label">Monthly Contribution</div>
                                        <div class="slider-container">
                                            <input type="range" id="monthly-slider" class="value-slider" min="0" max="5000" step="50" value="500">
                                            <div class="slider-value">$<span id="monthly-value">500</span></div>
                                        </div>
                                    </div>
                                    
                                    <div class="input-row">
                                        <div class="input-label">Annual Interest Rate</div>
                                        <div class="slider-container">
                                            <input type="range" id="rate-slider" class="value-slider" min="1" max="30" step="0.1" value="7">
                                            <div class="slider-value"><span id="rate-value">7</span>%</div>
                                        </div>
                                    </div>
                                    
                                    <div class="input-row">
                                        <div class="input-label">Investment Period</div>
                                        <div class="slider-container">
                                            <input type="range" id="years-slider" class="value-slider" min="1" max="40" step="1" value="10">
                                            <div class="slider-value"><span id="years-value">10</span> years</div>
                                        </div>
                                    </div>
                                    
                                    <div class="input-row">
                                        <div class="input-label">Compound Frequency</div>
                                        <div class="frequency-options">
                                            <div class="freq-btn active" data-freq="12">Monthly</div>
                                            <div class="freq-btn" data-freq="4">Quarterly</div>
                                            <div class="freq-btn" data-freq="2">Semi-annual</div>
                                            <div class="freq-btn" data-freq="1">Annual</div>
                                            <div class="freq-btn" data-freq="365">Daily</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="tool-buttons" style="margin-top: 30px;">
                                    <button class="btn btn-primary" id="calculate-btn">Calculate Growth</button>
                                    <button class="btn btn-secondary" id="reset-btn">Reset</button>
                                    <button class="btn btn-success" id="export-btn">Export Results</button>
                                </div>
                            </div>
                            
                            <!-- Results Section -->
                            <div class="result-section">
                                <h3>Investment Growth</h3>
                                
                                <div class="result-box">
                                    <div class="result-label">Total Future Value</div>
                                    <div class="result-value" id="total-value">$0</div>
                                    <div class="result-label">After <span id="years-display">0</span> years</div>
                                </div>
                                
                                <div class="result-grid">
                                    <div class="result-item">
                                        <div class="title">Total Principal</div>
                                        <div class="value" id="total-principal">$0</div>
                                    </div>
                                    <div class="result-item">
                                        <div class="title">Total Interest</div>
                                        <div class="value" id="total-interest">$0</div>
                                    </div>
                                    <div class="result-item">
                                        <div class="title">Annual Return</div>
                                        <div class="value" id="annual-return">0%</div>
                                    </div>
                                    <div class="result-item">
                                        <div class="title">Monthly Growth</div>
                                        <div class="value" id="monthly-growth">$0</div>
                                    </div>
                                </div>
                                
                                <div class="calc-legend">
                                    <div class="legend-item">
                                        <div class="legend-color principal"></div>
                                        <span>Principal</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color interest"></div>
                                        <span>Interest</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color total"></div>
                                        <span>Total</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Growth Chart -->
                        <div class="chart-container">
                            <h4 style="margin-bottom: 20px;">Growth Over Time</h4>
                            <div class="chart-bar" id="growth-chart"></div>
                            <div class="timeline-controls" id="timeline-labels"></div>
                        </div>
                        
                        <!-- Summary Cards -->
                        <div class="summary-cards">
                            <div class="summary-card green">
                                <div class="title">End Balance</div>
                                <div class="amount" id="end-balance">$0</div>
                            </div>
                            <div class="summary-card blue">
                                <div class="title">Total Deposits</div>
                                <div class="amount" id="total-deposits">$0</div>
                            </div>
                            <div class="summary-card purple">
                                <div class="title">Total Interest</div>
                                <div class="amount" id="summary-interest">$0</div>
                            </div>
                            <div class="summary-card">
                                <div class="title">Avg. Annual Return</div>
                                <div class="amount" id="avg-return">0%</div>
                            </div>
                        </div>
                        
                        <!-- Year-by-Year Breakdown -->
                        <div style="margin: 40px 0;">
                            <h3>Year-by-Year Breakdown</h3>
                            <div style="overflow-x: auto; margin-top: 20px;">
                                <table style="width: 100%; border-collapse: collapse;">
                                    <thead>
                                        <tr style="background: #f8fafc;">
                                            <th style="padding: 12px; text-align: left;">Year</th>
                                            <th style="padding: 12px; text-align: right;">Beginning Balance</th>
                                            <th style="padding: 12px; text-align: right;">Deposits</th>
                                            <th style="padding: 12px; text-align: right;">Interest</th>
                                            <th style="padding: 12px; text-align: right;">End Balance</th>
                                            <th style="padding: 12px; text-align: right;">Growth</th>
                                        </tr>
                                    </thead>
                                    <tbody id="yearly-table">
                                        <!-- Yearly data will be inserted here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Comparison Scenarios -->
                        <div style="background: #f0f9ff; padding: 25px; border-radius: 12px; margin: 30px 0; border: 2px solid #0ea5e9;">
                            <h3>Comparison Scenarios</h3>
                            <p>See how different rates affect your investment:</p>
                            <div id="scenarios-container" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 20px;">
                                <!-- Scenarios will be generated here -->
                            </div>
                        </div>
                        
                        <div class="info-section">
                            <h3>About Compound Interest</h3>
                            <p>Compound interest is the interest calculated on the initial principal and also on the accumulated interest of previous periods. It's often called "interest on interest" and can significantly grow your investments over time.</p>
                            
                            <h4>Formula:</h4>
                            <div style="background: #f8fafc; padding: 20px; border-radius: 8px; font-family: 'Courier New', monospace; margin: 15px 0;">
                                A = P(1 + r/n)^(nt) + PMT √ó (((1 + r/n)^(nt) - 1) / (r/n))
                            </div>
                            <p>Where:</p>
                            <ul>
                                <li><strong>A</strong> = Future value of the investment</li>
                                <li><strong>P</strong> = Principal investment amount</li>
                                <li><strong>PMT</strong> = Monthly contribution amount</li>
                                <li><strong>r</strong> = Annual interest rate (decimal)</li>
                                <li><strong>n</strong> = Number of times interest compounds per year</li>
                                <li><strong>t</strong> = Number of years the money is invested</li>
                            </ul>
                            
                            <h4>Key Insights:</h4>
                            <ul>
                                <li><strong>The Power of Compounding:</strong> Small, regular contributions can grow significantly over time</li>
                                <li><strong>Time is Your Best Friend:</strong> Starting early gives compounding more time to work</li>
                                <li><strong>Consistency Matters:</strong> Regular monthly contributions boost growth</li>
                                <li><strong>Rate Matters:</strong> Even a 1% difference in interest rate can mean thousands over decades</li>
                            </ul>
                            
                            <p><strong>Example:</strong> Investing $10,000 at 7% annual interest for 30 years with $200 monthly contributions grows to approximately $306,000!</p>
                        </div>
                    </div>
                </div>
                
                <div class="tool-sidebar">
                    <div class="ad-banner vertical">Ad Space (300x250)</div>
                    
                    <h3>Related Calculators</h3>
                    <ul class="related-tools">
                        <li><a href="loan-calculator.html">‚û§ Loan Calculator</a></li>
                        <li><a href="mortgage-calculator.html">‚û§ Mortgage Calculator</a></li>
                        <li><a href="tax-calculator.html">‚û§ Tax Calculator</a></li>
                        <li><a href="percentage-calculator.html">‚û§ Percentage Calculator</a></li>
                    </ul>
                    
                    <div style="background: #f8fafc; padding: 15px; border-radius: 8px; margin-top: 20px;">
                        <h4>Common Rates</h4>
                        <table style="width: 100%; font-size: 0.85rem;">
                            <tr><td>Savings Account</td><td style="text-align: right;">1-2%</td></tr>
                            <tr><td>CDs</td><td style="text-align: right;">2-3%</td></tr>
                            <tr><td>Bonds</td><td style="text-align: right;">3-5%</td></tr>
                            <tr><td>Stock Market</td><td style="text-align: right;">7-10%</td></tr>
                            <tr><td>Real Estate</td><td style="text-align: right;">8-12%</td></tr>
                        </table>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Daily Smart Tool</h3>
                    <p>Your one-stop destination for free online utilities, calculators, converters, and productivity tools.</p>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul class="footer-links">
                        <li><a href="../index.html">Home</a></li>
                        <li><a href="../all-tools.html">All Tools</a></li>
                        <li><a href="../about.html">About Us</a></li>
                        <li><a href="../contact.html">Contact</a></li>
                        <li><a href="../privacy.html">Privacy Policy</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Popular Categories</h3>
                    <ul class="footer-links">
                        <li><a href="../tools/text/text-case-converter.html">Text Tools</a></li>
                        <li><a href="../tools/image/image-resizer.html">Image Tools</a></li>
                        <li><a href="loan-calculator.html">Calculators</a></li>
                        <li><a href="../tools/converters/unit-converter.html">Converters</a></li>
                        <li><a href="../tools/generators/password-generator.html">Generators</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact Us</h3>
                    <ul class="footer-links">
                        <li>Email: contact@dailysmarttool.com</li>
                        <li>Feedback: feedback@dailysmarttool.com</li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                &copy; <script>document.write(new Date().getFullYear())</script> Daily Smart Tool. All rights reserved. | Part of Safetyguide360 Network
            </div>
        </div>
    </footer>

    <script src="../script.js"></script>
    <script>
        // Format currency
        function formatCurrency(amount) {
            return '$' + amount.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
        }
        
        // Format percentage
        function formatPercent(percent) {
            return percent.toFixed(2) + '%';
        }
        
        // Calculate compound interest
        function calculateCompoundInterest() {
            // Get input values
            const principal = parseFloat(document.getElementById('principal-slider').value);
            const monthlyContribution = parseFloat(document.getElementById('monthly-slider').value);
            const annualRate = parseFloat(document.getElementById('rate-slider').value) / 100;
            const years = parseFloat(document.getElementById('years-slider').value);
            
            // Get compound frequency
            const freqBtn = document.querySelector('.freq-btn.active');
            const compoundFrequency = parseInt(freqBtn.getAttribute('data-freq'));
            
            // Calculate
            const ratePerPeriod = annualRate / compoundFrequency;
            const totalPeriods = years * compoundFrequency;
            const monthlyPeriods = years * 12;
            
            // Future value of lump sum
            const futureValueLumpSum = principal * Math.pow(1 + ratePerPeriod, totalPeriods);
            
            // Future value of monthly contributions (annuity)
            let futureValueAnnuity = 0;
            if (monthlyContribution > 0) {
                // Convert monthly contribution to match compound frequency
                const contributionPerPeriod = monthlyContribution * (12 / compoundFrequency);
                futureValueAnnuity = contributionPerPeriod * ((Math.pow(1 + ratePerPeriod, totalPeriods) - 1) / ratePerPeriod);
            }
            
            // Total future value
            const totalFutureValue = futureValueLumpSum + futureValueAnnuity;
            
            // Total deposits
            const totalDeposits = principal + (monthlyContribution * 12 * years);
            
            // Total interest earned
            const totalInterest = totalFutureValue - totalDeposits;
            
            // Update display values
            document.getElementById('total-value').textContent = formatCurrency(totalFutureValue);
            document.getElementById('years-display').textContent = years;
            document.getElementById('total-principal').textContent = formatCurrency(totalDeposits);
            document.getElementById('total-interest').textContent = formatCurrency(totalInterest);
            document.getElementById('end-balance').textContent = formatCurrency(totalFutureValue);
            document.getElementById('total-deposits').textContent = formatCurrency(totalDeposits);
            document.getElementById('summary-interest').textContent = formatCurrency(totalInterest);
            
            // Calculate annual return
            const annualReturn = (Math.pow(totalFutureValue / totalDeposits, 1 / years) - 1) * 100;
            document.getElementById('annual-return').textContent = formatPercent(annualReturn);
            document.getElementById('avg-return').textContent = formatPercent(annualReturn);
            
            // Calculate monthly growth (average)
            const monthlyGrowth = totalInterest / (years * 12);
            document.getElementById('monthly-growth').textContent = formatCurrency(monthlyGrowth);
            
            // Generate yearly breakdown
            generateYearlyBreakdown(principal, monthlyContribution, annualRate, years, compoundFrequency);
            
            // Update chart
            updateGrowthChart(principal, monthlyContribution, annualRate, years, compoundFrequency);
            
            // Generate comparison scenarios
            generateScenarios(principal, monthlyContribution, years, compoundFrequency);
        }
        
        // Generate yearly breakdown
        function generateYearlyBreakdown(principal, monthlyContribution, annualRate, years, compoundFrequency) {
            const table = document.getElementById('yearly-table');
            table.innerHTML = '';
            
            let balance = principal;
            const ratePerPeriod = annualRate / compoundFrequency;
            const periodsPerYear = compoundFrequency;
            const contributionPerPeriod = monthlyContribution * (12 / compoundFrequency);
            
            for (let year = 1; year <= years; year++) {
                let yearInterest = 0;
                const startBalance = balance;
                
                // Calculate for each period in the year
                for (let period = 0; period < periodsPerYear; period++) {
                    const interest = balance * ratePerPeriod;
                    yearInterest += interest;
                    balance += interest + contributionPerPeriod;
                }
                
                // Calculate growth percentage
                const growthPercent = ((balance - startBalance - (monthlyContribution * 12)) / startBalance) * 100;
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td style="padding: 12px; border-bottom: 1px solid #e2e8f0; font-weight: bold;">Year ${year}</td>
                    <td style="padding: 12px; border-bottom: 1px solid #e2e8f0; text-align: right;">${formatCurrency(startBalance)}</td>
                    <td style="padding: 12px; border-bottom: 1px solid #e2e8f0; text-align: right;">${formatCurrency(monthlyContribution * 12)}</td>
                    <td style="padding: 12px; border-bottom: 1px solid #e2e8f0; text-align: right; color: #10b981;">${formatCurrency(yearInterest)}</td>
                    <td style="padding: 12px; border-bottom: 1px solid #e2e8f0; text-align: right; font-weight: bold;">${formatCurrency(balance)}</td>
                    <td style="padding: 12px; border-bottom: 1px solid #e2e8f0; text-align: right; color: #10b981;">${growthPercent.toFixed(2)}%</td>
                `;
                table.appendChild(row);
            }
        }
        
        // Update growth chart
        function updateGrowthChart(principal, monthlyContribution, annualRate, years, compoundFrequency) {
            const chart = document.getElementById('growth-chart');
            const timeline = document.getElementById('timeline-labels');
            chart.innerHTML = '';
            timeline.innerHTML = '';
            
            const maxYears = Math.min(years, 10); // Show max 10 years on chart
            const dataPoints = Math.min(maxYears * 4, 40); // Max 40 data points
            
            let balance = principal;
            const ratePerPeriod = annualRate / compoundFrequency;
            const periodsPerPoint = Math.ceil((years * compoundFrequency) / dataPoints);
            const contributionPerPeriod = monthlyContribution * (12 / compoundFrequency);
            
            let totalDeposits = principal;
            let maxBalance = 0;
            const balances = [];
            const deposits = [];
            const interests = [];
            
            for (let i = 0; i < dataPoints; i++) {
                let periodInterest = 0;
                
                // Calculate for periods in this point
                for (let p = 0; p < periodsPerPoint; p++) {
                    const interest = balance * ratePerPeriod;
                    periodInterest += interest;
                    balance += interest + contributionPerPeriod;
                    totalDeposits += contributionPerPeriod;
                }
                
                const interestSoFar = balance - totalDeposits;
                maxBalance = Math.max(maxBalance, balance);
                
                balances.push(balance);
                deposits.push(totalDeposits);
                interests.push(interestSoFar);
            }
            
            // Create bars
            for (let i = 0; i < dataPoints; i++) {
                const barContainer = document.createElement('div');
                barContainer.style.position = 'relative';
                barContainer.style.flex = '1';
                barContainer.style.height = '100%';
                barContainer.style.display = 'flex';
                barContainer.style.flexDirection = 'column';
                barContainer.style.justifyContent = 'flex-end';
                
                // Interest portion
                const interestBar = document.createElement('div');
                interestBar.className = 'bar interest';
                interestBar.style.height = (interests[i] / maxBalance * 100) + '%';
                interestBar.style.position = 'absolute';
                interestBar.style.bottom = '0';
                interestBar.style.left = '0';
                interestBar.style.width = '100%';
                
                // Principal portion
                const principalBar = document.createElement('div');
                principalBar.className = 'bar';
                principalBar.style.height = (deposits[i] / maxBalance * 100) + '%';
                principalBar.style.position = 'absolute';
                principalBar.style.bottom = (interests[i] / maxBalance * 100) + '%';
                principalBar.style.left = '0';
                principalBar.style.width = '100%';
                
                // Label for selected points
                if (i === 0 || i === Math.floor(dataPoints / 2) || i === dataPoints - 1) {
                    const year = Math.floor((i / dataPoints) * years);
                    const label = document.createElement('div');
                    label.className = 'bar-label';
                    label.textContent = `Year ${year}`;
                    barContainer.appendChild(label);
                }
                
                barContainer.appendChild(interestBar);
                barContainer.appendChild(principalBar);
                chart.appendChild(barContainer);
            }
            
            // Add timeline labels
            for (let year = 0; year <= maxYears; year += Math.ceil(maxYears / 5)) {
                const marker = document.createElement('div');
                marker.className = 'time-marker';
                marker.style.flex = year === 0 || year === maxYears ? '0 0 auto' : '1';
                marker.textContent = `Year ${year}`;
                timeline.appendChild(marker);
            }
        }
        
        // Generate comparison scenarios
        function generateScenarios(principal, monthlyContribution, years, compoundFrequency) {
            const container = document.getElementById('scenarios-container');
            container.innerHTML = '';
            
            const scenarios = [
                { rate: 3, label: 'Conservative (3%)', color: '#ef4444' },
                { rate: 5, label: 'Moderate (5%)', color: '#f59e0b' },
                { rate: 7, label: 'Current (7%)', color: '#10b981' },
                { rate: 9, label: 'Aggressive (9%)', color: '#0ea5e9' },
                { rate: 12, label: 'Very Aggressive (12%)', color: '#8b5cf6' }
            ];
            
            scenarios.forEach(scenario => {
                const rate = scenario.rate / 100;
                const ratePerPeriod = rate / compoundFrequency;
                const totalPeriods = years * compoundFrequency;
                const contributionPerPeriod = monthlyContribution * (12 / compoundFrequency);
                
                // Future value calculations
                const futureValueLumpSum = principal * Math.pow(1 + ratePerPeriod, totalPeriods);
                let futureValueAnnuity = 0;
                if (monthlyContribution > 0) {
                    futureValueAnnuity = contributionPerPeriod * ((Math.pow(1 + ratePerPeriod, totalPeriods) - 1) / ratePerPeriod);
                }
                const totalFutureValue = futureValueLumpSum + futureValueAnnuity;
                
                const scenarioCard = document.createElement('div');
                scenarioCard.style.background = 'white';
                scenarioCard.style.padding = '15px';
                scenarioCard.style.borderRadius = '8px';
                scenarioCard.style.border = `2px solid ${scenario.color}`;
                scenarioCard.style.textAlign = 'center';
                
                scenarioCard.innerHTML = `
                    <div style="font-weight: bold; color: ${scenario.color}; margin-bottom: 10px;">${scenario.label}</div>
                    <div style="font-size: 1.5rem; font-weight: bold; margin: 10px 0;">${formatCurrency(totalFutureValue)}</div>
                    <div style="font-size: 0.9rem; color: #64748b;">Total after ${years} years</div>
                `;
                
                container.appendChild(scenarioCard);
            });
        }
        
        // Update slider values display
        function updateSliderValues() {
            document.getElementById('principal-value').textContent = 
                parseInt(document.getElementById('principal-slider').value).toLocaleString();
            document.getElementById('monthly-value').textContent = 
                parseInt(document.getElementById('monthly-slider').value).toLocaleString();
            document.getElementById('rate-value').textContent = 
                parseFloat(document.getElementById('rate-slider').value).toFixed(1);
            document.getElementById('years-value').textContent = 
                parseInt(document.getElementById('years-slider').value);
        }
        
        // Event Listeners
        // Slider inputs
        document.querySelectorAll('.value-slider').forEach(slider => {
            slider.addEventListener('input', () => {
                updateSliderValues();
                calculateCompoundInterest();
            });
        });
        
        // Frequency buttons
        document.querySelectorAll('.freq-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.freq-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                calculateCompoundInterest();
            });
        });
        
        // Calculate button
        document.getElementById('calculate-btn').addEventListener('click', calculateCompoundInterest);
        
        // Reset button
        document.getElementById('reset-btn').addEventListener('click', () => {
            document.getElementById('principal-slider').value = 10000;
            document.getElementById('monthly-slider').value = 500;
            document.getElementById('rate-slider').value = 7;
            document.getElementById('years-slider').value = 10;
            
            updateSliderValues();
            calculateCompoundInterest();
        });
        
        // Export button
        document.getElementById('export-btn').addEventListener('click', () => {
            const data = {
                principal: document.getElementById('principal-slider').value,
                monthly: document.getElementById('monthly-slider').value,
                rate: document.getElementById('rate-slider').value,
                years: document.getElementById('years-slider').value,
                totalValue: document.getElementById('total-value').textContent,
                totalInterest: document.getElementById('total-interest').textContent
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = 'compound-interest-calculator-results.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        });
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateSliderValues();
            calculateCompoundInterest();
        });
    </script>
</body>
</html>